<!-- 订单查询页面内容 -->
<style>
    .filter-card {
        padding: 20px;
    }

    .filter-item {
        display: flex;
        align-items: center;
        gap: 8px;
        min-height: 40px;
    }

    :deep(.el-form-item) {
        margin-bottom: 0;
        width: 100%;
        display: flex;
        align-items: center;
    }

    :deep(.el-form-item__label) {
        font-size: 14px;
        color: #606266;
        height: 32px;
        line-height: 32px;
        min-width: 80px;
    }

    :deep(.el-form-item__content-wrap) {
        display: flex;
        align-items: center;
        flex: 1;
    }

    :deep(.el-checkbox) {
        margin-right: 8px;
        height: 32px;
        line-height: 32px;
        display: inline-flex;
        align-items: center;
        flex-shrink: 0;
    }

    :deep(.el-checkbox__input) {
        vertical-align: middle;
    }

    :deep(.el-checkbox__label) {
        line-height: 32px;
        display: flex;
        align-items: center;
        width: 100%;
    }

    :deep(.el-form-item__content) {
        line-height: 32px;
        display: flex;
        align-items: center;
        flex: 1;
    }

    :deep(.el-input__wrapper) {
        height: 32px;
        align-items: center;
    }

    :deep(.el-input__inner) {
        height: 32px;
        line-height: 32px;
    }

    :deep(.el-select__wrapper) {
        height: 38px;
        align-items: center;
    }

    :deep(.el-select .el-input__inner) {
        height: 38px;
        line-height: 38px;
    }

    .filter-actions {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 20px;
        padding-top: 20px;
        border-top: 1px solid #EBEEF5;
    }
</style>
<div class="order-query-container">
        <!-- 筛选条件区域 -->
        <el-card class="filter-card">
            <el-row :gutter="20">
                <el-col :span="8">
                    <div class="filter-item">
                        <el-checkbox v-model="enabled.billNo" />
                        <el-form-item label="账单号">
                            <el-input v-model="queryForm.billNo" :disabled="!enabled.billNo" placeholder="精确匹配" />
                        </el-form-item>
                    </div>
                </el-col>
                
                <el-col :span="8">
                    <div class="filter-item">
                        <el-checkbox v-model="enabled.operator" />
                        <el-form-item label="操作员账号">
                            <el-input v-model="queryForm.operator" :disabled="!enabled.operator" placeholder="操作员账号" />
                        </el-form-item>
                    </div>
                </el-col>
                
                <el-col :span="8">
                    <div class="filter-item">
                        <el-checkbox v-model="enabled.carPlate" />
                        <el-form-item label="车牌号">
                            <el-input 
                                v-model="queryForm.carPlate" 
                                :disabled="!enabled.carPlate" 
                                placeholder="模糊匹配"
                                :error="!!carPlateError" />
                        </el-form-item>
                    </div>
                </el-col>
            </el-row>
            
            <el-row :gutter="20">
                <el-col :span="8">
                    <div class="filter-item">
                        <el-checkbox v-model="enabled.item" />
                        <el-form-item label="收费项目">
                            <el-select v-model="queryForm.item" :disabled="!enabled.item" placeholder="请选择" clearable>
                                <el-option label="电费" value="电费" />
                                <el-option label="热水费" value="热水费" />
                                <el-option label="冷水费" value="冷水费" />
                                <el-option label="网费" value="网费" />
                                <el-option label="停车费" value="停车费" />
                                <el-option label="房租" value="房租" />
                                <el-option label="管理费" value="管理费" />
                            </el-select>
                        </el-form-item>
                    </div>
                </el-col>
                
                <el-col :span="8">
                    <div class="filter-item">
                        <el-checkbox v-model="enabled.method" />
                        <el-form-item label="收款方式">
                            <el-select v-model="queryForm.method" :disabled="!enabled.method" placeholder="请选择" clearable>
                                <el-option label="微信" value="微信" />
                                <el-option label="支付宝" value="支付宝" />
                                <el-option label="现金" value="现金" />
                            </el-select>
                        </el-form-item>
                    </div>
                </el-col>
                
                <el-col :span="8">
                    <div class="filter-item">
                        <el-checkbox v-model="enabled.timeRange" />
                        <el-form-item label="录入时间">
                            <el-date-picker
                                v-model="queryForm.timeRange"
                                type="daterange"
                                range-separator="至"
                                start-placeholder="开始日期"
                                end-placeholder="结束日期"
                                :disabled="!enabled.timeRange"
                                style="width: 100%;" />
                        </el-form-item>
                    </div>
                </el-col>
            </el-row>
            
            <div class="filter-actions">
                <el-button type="primary" @click="handleQuery" :loading="queryLoading" :disabled="isQueryDisabled">
                    <i class="el-icon-search"></i> 查询
                </el-button>
                <el-button @click="resetQuery">
                    <i class="el-icon-refresh-left"></i> 重置
                </el-button>
                <el-alert v-if="carPlateError" :title="carPlateError" type="error" :closable="false" style="margin-left: 10px;" />
            </div>
        </el-card>
        
        <!-- 查询结果区域 -->
        <div class="results-section">
            <div v-if="queryLoading" class="loading-container">
                <div style="font-size: 14px; color: #909399;">
                    <i class="el-icon-loading"></i> 加载中...
                </div>
            </div>
            
            <div v-else-if="!hasQueried" class="empty-container">
                <el-empty description="请选择查询条件后点击查询按钮"></el-empty>
            </div>
            
            <div v-else-if="queryData.length === 0" class="empty-container">
                <el-empty description="暂无查询结果"></el-empty>
            </div>
            
            <div v-else class="table-container">
                <el-table 
                    :data="queryData" 
                    border 
                    stripe 
                    style="width: 100%"
                    @sort-change="handleSortChange">
                    <el-table-column 
                        prop="billNumber" 
                        label="账单号" 
                        width="150"
                        sortable="custom">
                    </el-table-column>
                    
                    <el-table-column 
                        prop="operatorAccount" 
                        label="操作员账号" 
                        width="120">
                    </el-table-column>
                    
                    <el-table-column 
                        prop="building" 
                        label="楼栋号" 
                        width="80">
                    </el-table-column>
                    
                    <el-table-column 
                        prop="room" 
                        label="房间号" 
                        width="80">
                    </el-table-column>
                    
                    <el-table-column 
                        prop="entryTime" 
                        label="录入时间" 
                        width="180"
                        sortable="custom">
                    </el-table-column>
                    
                    <el-table-column 
                        prop="totalAmount" 
                        label="收款金额(元)" 
                        width="120"
                        sortable="custom">
                        {% raw %}<template #default="scope">
                            <span :style="{ color: scope.row.totalAmount < 0 ? '#f56c6c' : '' }">
                                ¥[[ scope.row.totalAmount.toFixed(2) ]]
                            </span>
                        </template>{% endraw %}
                    </el-table-column>
                    
                    <el-table-column 
                        prop="paymentMethod" 
                        label="收款方式" 
                        width="100">
                    </el-table-column>
                    
                    <el-table-column 
                        prop="remark" 
                        label="备注" 
                        min-width="150"
                        show-overflow-tooltip>
                    </el-table-column>
                    
                    <el-table-column 
                        label="操作" 
                        width="100" 
                        fixed="right">
                        {% raw %}<template #default="scope">
                            <el-button 
                                type="text" 
                                size="small" 
                                @click="handleViewDetail(scope.row)">
                                查看详情
                            </el-button>
                        </template>{% endraw %}
                    </el-table-column>
                </el-table>
                
                <!-- 分页 -->
                <div class="pagination-container">
                    {% raw %}<el-pagination
                        v-model:current-page="queryPagination.page"
                        v-model:page-size="queryPagination.per_page"
                        :page-sizes="[10, 20, 50, 100]"
                        :total="queryPagination.total"
                        layout="total, sizes, prev, pager, next, jumper"
                        @size-change="handleSizeChange"
                        @current-change="handleCurrentChange">
                    </el-pagination>{% endraw %}
                </div>
                
                <!-- 合计信息 -->
                <div class="summary-container">
                    <el-alert 
                        :title="`当前页合计金额: ¥${currentPageTotal.toFixed(2)}`" 
                        type="info" 
                        :closable="false">
                    </el-alert>
                </div>
            </div>
        </div>
</div>